$(function(){function e(){$(".loader").removeClass("hide");var e=[];u.map(function(n){e.push(new Promise(function(e,i){$.getJSON("./functions.php?channel="+n,function(i){i.error?e({display_name:n,stream:null,bio:i.message,logo:"public/img/defaultLogo.png"}):$.getJSON("./functions.php?stream="+n,function(n){e(Object.assign(i,n))})})}))}),Promise.all(e).then(function(e){s=e,n(o)})}function n(e){filteredUsers=s.filter(function(n){switch(e){case r:return n;case a:return null!=n.stream;case l:return null==n.stream}}),""!==f?t(f,filteredUsers):i(filteredUsers)}function i(e){$(".loader").addClass("hide");var n=$("#usersLayout").html(),i=Handlebars.compile(n);$("#users").html(i({data:e}))}function t(e,n){filteredUsers=n.filter(function(n){return null!=n.display_name.toLowerCase().match(e.toLowerCase())}),i(filteredUsers)}var s=[],r="All",a="Live",l="Offline",o=r,f="",u=["brunofin","ESL_SC2","freecodecamp"];$(document).ready(function(){e(),$(".filter a").on("click",function(e){e.preventDefault(),o=this.innerHTML,$(".filter a").removeClass("active"),$(this).addClass("active"),n(o)}),$("#search").on("change textInput input",function(e){f=this.value,t(f,s)})}),Handlebars.registerHelper("streamInfo",function(e){return null!=e?new Handlebars.SafeString('<div class="footer"> <div><span>'+e.viewers+"</span> viewers</div><div>"+e.channel.status+"</div></div>"):new Handlebars.SafeString('<div class="footer"> <div><span> 0 </span> viewers</div><div class="offline"> offline </div></div>')})});